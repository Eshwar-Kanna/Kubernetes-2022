


Replication Controller   :   
        kubernetes controller is the one that relaunch when pod deleted


=> apply command is used to recreate after changes in yml file

=> selector is used in RC  such that it select that  particular pod from all existing pods  and monitor it to keep available to clients with mentioned replicas 

=> template is used to mention  the details of pod so that it recreate the pod when is is down with the details in template


3. myrc.yml

apiVersion: v1
kind: ReplicationController
metadata: 
  name: myrc1
spec:
  replicas: 2
  selector:
    dc: IN
  template:
    metadata:
      name: "mypod"
      labels:
       dc: IN
    spec:
      containers:
      - name: "myrc1"
        image: "httpd"


kubectl create -f myrc.yml

     
minikube ssh    ---->  to login into shell from CLI instaed in VM the shell is called cluster or svc

route -n   -->  Describe the Ip connected with 0.0.0.0   
docker ps    
docker attach   < name / ID >

docker exec -it < pod ID >  sh  ---> shell of pod 
  hostname -i  --> to know IP


  when we expose a pod then it generate new  service in the container and provide a IP  for it to use service and access to it publicly 

  TYPES of SERVICES

    1. Nodeport   2. Clusterip  3. Loadbalancer 

  kubectl get svc 

  svc works as load balancer in K8S   like hAproxy  and Ngnix

  kubectl run myweb --image=vimal13/apache-webserver-php
  kubectl exec -it myweb --bash -->  get bash of above pod 
  kubectl expose pod myweb --type=Nodeport    --port=80
  kubectl delete all --all    ---> deletes everything in the cluster or node



  4. nodeport.yml

        apiVersion: v1
        kind: Service
        metadata:
                name: svc1
        spec:
                type: Nodeport
                selector:
                        dc: IN
                ports:
                - port: 80
                  targetport: 80
                  nodeport: 30000


ClusterIP  -- >  Private 
Nodeport   -- >  Public


To launch container with env variables
        
5       apiVersion: v1
        kind: Pod
        metadata:
                name: envpod
        spec:
                containers:
                - name: "myc2"
                  image: "httpd"
                  env:
                  - name: x
                    value: "5"




Apply commands work only for changes in specific keyword

        kubectl set env pod  <pod name>
        kubectl get pods -w  ----> highlights the change



6. 
                apiVersion: v1
                kind: pod
                metadata:
                        name: mysqlpod
                spec:
                        containers:
                        - name: sqlcon
                          image: mysql
                          env:
                          - name: MYSQL_ROOT_PASSWORD
                            value: "redhat"




Replica ---- >  1. Replication Controller  ( equality == , != )  ,   2. Replica Set  ( set based  DC in (IN , US) ) 

kubectl delete all --all

we can alse add labels to the pod having env   .  updating the code 5


7       apiVersion: v1
        kind: Pod
        metadata:
                name: envpod
                labels:
                        region: IN
                        team: team1
                        app: web
        spec:
                containers:
                - name: "myc2"
                  image: "httpd"
                  env:
                  - name: x
                    value: "5"
                

                kubectl apply -f first_pod.yml





8 
                apiVersion: apps/v1
                kind: Replicaset
                metadata:
                        name: myrs
                spec:
                        replicas: 2
                        selector:
                           matchExpressions:
                           - { key: dc, operation: In , values: [south] }
                           - { key: region, operation: In , values: [IN] }
                           matchLabels:
                              app: web

                        template:
                                metadata:
                                    name: "mypod"
                                    labels:
                                        dc: south
                                        region: IN
                                        app: web

                                spec:
                                        containers: 
                                        - name: "myc1"
                                          image: "httpd"


kubectl apply -f rs.yml

                
